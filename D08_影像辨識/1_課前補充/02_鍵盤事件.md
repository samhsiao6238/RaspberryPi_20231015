# 鍵盤事件

_cv2.waitKey(1) & 0xFF_

<br>

## 說明

1. 在樹莓派或其他 Linux 系統上，`cv2.waitKey(1) & 0xFF` 是一種標準做法，用於確保能夠正確捕捉鍵盤輸入。

<br>

2. 下面這行代碼是 OpenCV 中常見的一種模式，用於檢查是否按下了特定的鍵盤按鍵，在這個例子中是 'q' 鍵，通常用於實時圖像處理或視頻處理應用中。

    ```python
    if cv2.waitKey(1) & 0xFF == ord('q'):
    ```

<br>

## 詳解

1. `cv2.waitKey(1)`：調用 OpenCV 的 waitKey 函數，其中參數 `1` 表示會等待 1 毫秒的時間以檢測鍵盤輸入，該函數返回按下的鍵的 `ASCII 碼` ，如果在時間內沒有按鍵事件則返回 -1。

<br>

2. `& 0xFF`：這是一個 `位元運算`，因為 `cv2.waitKey(1)` 的返回值的是一個 32 位的整數，而 `& 0xFF` 會將這個整數與 `0xFF`（即十六進制的 `FF`，二進制的 `11111111`）進行位元運算，運算最終結果會取得返回值的最後 8 位。特別注意，在 Windows 上，可以直接使用 `cv2.waitKey(1)` 的返回值，而在樹莓派上則需要進行 `& 0xFF` 操作以正確取得按鍵碼，但為了提升代碼的穩定性與可移植性，建議養成使用習慣。

<br>

3. `== ord('q')`：`ord('q')` 會返回字符 'q' 的 ASCII 碼。這裡將 `cv2.waitKey(1) & 0xFF` 的結果與 'q' 的 ASCII 碼進行比較，已確認用戶是否按下了 'q' 鍵。

<br>

4. 常用於捕捉的非字串按鍵事件（對照 ASCII）有 `ENTER` (13)、`Escape` (27)、`Space` (32)等。

<br>

5. 其中若需要捕捉 `ENTER` 的 `ord('Enter')`，建議使用 `ord('\n')` 來取得換行鍵的 ASCII 碼，它通常是 `10`，使用 `ord('Enter')` 可能無效，在編程時若要使用務必再實測確認。

<br>

---

_END_