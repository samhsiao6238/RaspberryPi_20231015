# 文字轉語音

_直接先上程式碼，可直接在 JNB 中執行_

<br>

## 範例

1. 程式碼

```python
import os
from google.cloud import texttospeech

# 初始化 Google Text-to-Speech client
tts_client = texttospeech.TextToSpeechClient()

def text_to_speech(text):
    synthesis_input = texttospeech.SynthesisInput(text=text)

    # 設置語音參數
    voice_params = texttospeech.VoiceSelectionParams(
        language_code='cmn-Hant-TW', # 設定語言
        name='cmn-TW-Wavenet-C',    # 男生
        ssml_gender=texttospeech.SsmlVoiceGender.NEUTRAL)

    # 設置音頻輸出格式
    audio_config = texttospeech.AudioConfig(
        # LINEAR16 是 PCM 格式，適用於樹莓派
        audio_encoding=texttospeech.AudioEncoding.LINEAR16)  

    # 生成語音
    response = tts_client.synthesize_speech(
        input=synthesis_input, 
        voice=voice_params, 
        audio_config=audio_config)

    # 將回復的音頻內容寫入文件
    with open('output.wav', 'wb') as audio_file:
        audio_file.write(response.audio_content)
        print('Audio content written to file "output.wav"')

    return 'output.wav'

def play_audio(file_name):
    # 播放音頻文件
    os.system(f"aplay {file_name}")

def main():
    try:
        while True:
            text = input("請輸入要轉換為語音的文字內容，然後按下Enter：")
            if text.strip() == "":
                print("請注意，您沒有輸入任何文字。")
                continue
            
            print("正在轉換文本到語音...")
            audio_file = text_to_speech(text)
            print("正在播放語音...")
            play_audio(audio_file)
            
            user_input = input("輸入 'exit' 退出，或按 Enter 繼續：").lower()
            if user_input == 'exit':
                break
    except KeyboardInterrupt:
        print("用戶已經中斷程序")
    except Exception as e:
        print(f"程序發生錯誤：{e}")

if __name__ == "__main__":
    main()
```

<br>

---

_END_