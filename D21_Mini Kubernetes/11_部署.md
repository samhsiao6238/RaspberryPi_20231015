# 部署 

_在 MacOS 上部署應用到 Minikube_

## 步驟

1. 設置環境變量 KUBECONFIG，以指定 kubectl 使用特定的配置文件。

    ```bash
    export KUBECONFIG=~/.kube/config
    ```

2. 切換到 Minikube 上下文。

    ```bash
    kubectl config use-context minikube
    ```

    ![](images/img_19.png)

3. 將腳本保存到一個文件（例如 `deployment.yaml`），然後部署應用。

    ```bash
    kubectl apply -f deployment.yaml
    ```

4. 確認部署：
   ```bash
   kubectl get deployments
   kubectl get services
   ```

### 6. 在 MacOS 上部署應用到 K3s

#### 步驟：
1. 切換到 K3s 上下文：
   ```bash
   export KUBECONFIG=~/.kube/config_k3s
   ```

2. 部署應用：
   使用同樣的腳本文件：
   ```bash
   kubectl apply -f deployment.yaml
   ```

3. 確認部署：
   ```bash
   kubectl get deployments
   kubectl get services
   ```

### 小結

- 樹莓派 A（Minikube）：
  1. 啟動 Minikube。
  2. 確認 Minikube 狀態。

- 樹莓派 B（K3s）：
  1. 啟動 K3s。
  2. 確認 K3s 狀態。

- MacOS：
  1. 配置與 Minikube 的連接。
  2. 配置與 K3s 的連接。
  3. 在 Minikube 上部署應用。
  4. 在 K3s 上部署應用。

通過這些步驟，你可以在三台設備之間協同工作，並在 MacOS 上管理和部署應用到安裝了 Minikube 和 K3s 的樹莓派。