# 配置靜態路由

_在本機上配置靜態路由，使其能夠通過樹莓派訪問 Kubernetes 集群_

<br>

## 步驟

1. 確保 Minikube 已經在樹莓派上運行。

    ```bash
    minikube start --driver=docker
    ```

<br>

2. 在本機上添加靜態路由：假設樹莓派的 IP 是 192.168.1.153，運行以下命令，這會添加一條路由規則，將所有發往 192.168.49.0/24 網段的流量通過 192.168.1.153（樹莓派）轉發；特別注意，這並不是持久性的設定，該命令添加的路由規則只在當前會話中有效，系統重啟後會失效，若要建立持久性的路由，先確認這樣的設置可運作再進行。

    ```bash
    sudo route add -net 192.168.49.0/24 gw 192.168.1.153
    ```

<br>

## 靜態路由工作原理

_靜態路由是在網路中手動設置的一條路由規則，指示特定網段的流量應通過哪個網關進行轉發_

<br>

1. 目標網段：指定需要路由的目標網段，如 192.168.49.0/24。

<br>

2. 網關：指定用於到達目標網段的下一跳路由器或網關 IP 地址，如 192.168.1.153。

<br>

3. 命令的作用是告訴本機當需要訪問 192.168.49.0/24 網段的設備時，先將流量發送到樹莓派的 IP 地址 192.168.1.153，樹莓派會接收到這些流量並進行下一步的路由處理，將流量轉發到 Kubernetes 集群中的具體設備。

<br>

## 測試連接

1. 添加靜態路由後，可使用 kubectl 檢查連接。

    ```bash
    kubectl config use-context minikube
    kubectl get nodes
    ```

<br>

## 持久化設置
___

_END_